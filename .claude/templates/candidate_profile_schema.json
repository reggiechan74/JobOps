{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Candidate Profile Schema",
  "description": "Structured JSON schema for compressed candidate profiles with evidence traceability",
  "version": "1.0.0",
  "type": "object",
  "required": ["candidate", "technical_skills", "work_history", "education", "certifications", "metadata"],
  "properties": {
    "candidate": {
      "type": "object",
      "required": ["name", "current_title", "years_total_experience", "profile_generated", "source_files_count"],
      "properties": {
        "name": {
          "type": "string",
          "description": "Full name of candidate"
        },
        "current_title": {
          "type": "string",
          "description": "Most recent role title"
        },
        "years_total_experience": {
          "type": "number",
          "description": "Total years of professional experience"
        },
        "profile_generated": {
          "type": "string",
          "format": "date-time",
          "description": "ISO8601 timestamp of profile generation"
        },
        "source_files_count": {
          "type": "integer",
          "description": "Number of source files processed"
        }
      }
    },
    "technical_skills": {
      "type": "array",
      "description": "All technical skills with proficiency levels and evidence",
      "items": {
        "type": "object",
        "required": ["skill_name", "category", "proficiency_level", "years_experience", "evidence"],
        "properties": {
          "skill_name": {
            "type": "string",
            "description": "Technology, tool, or framework name"
          },
          "category": {
            "type": "string",
            "enum": ["Programming", "Database", "Cloud", "DevOps", "Analytics", "Business", "Domain", "Other"],
            "description": "Skill category classification"
          },
          "proficiency_level": {
            "type": "string",
            "enum": ["Expert", "Proficient", "Intermediate", "Basic"],
            "description": "Skill proficiency: Expert (5+ yrs), Proficient (2-4 yrs), Intermediate (1-2 yrs), Basic (<1 yr)"
          },
          "years_experience": {
            "type": "number",
            "description": "Years of experience with this skill"
          },
          "last_used": {
            "type": "string",
            "pattern": "^[0-9]{4}$",
            "description": "Year last used (YYYY format)"
          },
          "evidence": {
            "type": "object",
            "required": ["file", "lines"],
            "properties": {
              "file": {
                "type": "string",
                "description": "Source file path relative to repository root"
              },
              "lines": {
                "type": "string",
                "description": "Line numbers (e.g., '45-47' or '89')"
              },
              "context": {
                "type": "string",
                "description": "Brief quote showing usage"
              }
            }
          },
          "projects": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Project names where skill was applied"
          }
        }
      }
    },
    "work_history": {
      "type": "array",
      "description": "Complete employment history with achievements and metrics",
      "items": {
        "type": "object",
        "required": ["company", "title", "start_date", "duration_months", "evidence"],
        "properties": {
          "company": {
            "type": "string",
            "description": "Company name"
          },
          "title": {
            "type": "string",
            "description": "Job title"
          },
          "start_date": {
            "type": "string",
            "pattern": "^[0-9]{4}-[0-9]{2}$",
            "description": "Start date in YYYY-MM format"
          },
          "end_date": {
            "type": "string",
            "pattern": "^([0-9]{4}-[0-9]{2}|Present)$",
            "description": "End date in YYYY-MM format or 'Present'"
          },
          "duration_months": {
            "type": "integer",
            "description": "Duration in months"
          },
          "industry": {
            "type": "string",
            "description": "Industry sector"
          },
          "company_size": {
            "type": "string",
            "enum": ["Startup", "SMB", "Mid-Market", "Enterprise"],
            "description": "Company size classification"
          },
          "team_size": {
            "type": "integer",
            "description": "Size of team managed or worked with"
          },
          "budget_managed": {
            "type": ["string", "null"],
            "description": "Budget managed (e.g., '$2.5M') or null"
          },
          "key_responsibilities": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Primary responsibilities with scope"
          },
          "achievements": {
            "type": "array",
            "items": {
              "type": "object",
              "required": ["description", "metrics", "evidence"],
              "properties": {
                "description": {
                  "type": "string",
                  "description": "What was achieved"
                },
                "metrics": {
                  "type": "string",
                  "description": "Quantified impact with timeframe"
                },
                "timeframe": {
                  "type": "string",
                  "description": "Duration or date range"
                },
                "evidence": {
                  "type": "object",
                  "required": ["file", "lines"],
                  "properties": {
                    "file": {
                      "type": "string"
                    },
                    "lines": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "technologies_used": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Technologies and tools used in this role"
          },
          "evidence": {
            "type": "object",
            "required": ["file", "lines"],
            "properties": {
              "file": {
                "type": "string"
              },
              "lines": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "education": {
      "type": "array",
      "description": "Educational background",
      "items": {
        "type": "object",
        "required": ["degree", "institution", "evidence"],
        "properties": {
          "degree": {
            "type": "string",
            "description": "Degree type and field"
          },
          "institution": {
            "type": "string",
            "description": "University or institution name"
          },
          "graduation_year": {
            "type": "string",
            "pattern": "^[0-9]{4}$",
            "description": "Graduation year (YYYY)"
          },
          "relevant_coursework": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Relevant courses completed"
          },
          "evidence": {
            "type": "object",
            "required": ["file", "lines"],
            "properties": {
              "file": {
                "type": "string"
              },
              "lines": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "certifications": {
      "type": "array",
      "description": "Professional certifications and credentials",
      "items": {
        "type": "object",
        "required": ["name", "issuer", "status", "evidence"],
        "properties": {
          "name": {
            "type": "string",
            "description": "Certification name"
          },
          "issuer": {
            "type": "string",
            "description": "Issuing organization"
          },
          "date_obtained": {
            "type": "string",
            "pattern": "^[0-9]{4}-[0-9]{2}$",
            "description": "Date obtained (YYYY-MM)"
          },
          "expiry_date": {
            "type": ["string", "null"],
            "pattern": "^[0-9]{4}-[0-9]{2}$",
            "description": "Expiry date (YYYY-MM) or null if no expiry"
          },
          "status": {
            "type": "string",
            "enum": ["Active", "Expired", "In-Progress"],
            "description": "Current status"
          },
          "evidence": {
            "type": "object",
            "required": ["file", "lines"],
            "properties": {
              "file": {
                "type": "string"
              },
              "lines": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "projects": {
      "type": "array",
      "description": "Notable projects with outcomes",
      "items": {
        "type": "object",
        "required": ["name", "role", "technologies", "evidence"],
        "properties": {
          "name": {
            "type": "string",
            "description": "Project name"
          },
          "role": {
            "type": "string",
            "description": "Your role in the project"
          },
          "duration": {
            "type": "string",
            "description": "Project duration (e.g., '6 months')"
          },
          "scope": {
            "type": "string",
            "description": "Team size, budget, or scale metrics"
          },
          "technologies": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Technologies used"
          },
          "outcomes": {
            "type": "string",
            "description": "Measurable results achieved"
          },
          "evidence": {
            "type": "object",
            "required": ["file", "lines"],
            "properties": {
              "file": {
                "type": "string"
              },
              "lines": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "domain_expertise": {
      "type": "array",
      "description": "Industry and functional expertise areas",
      "items": {
        "type": "object",
        "required": ["domain", "years_experience", "depth", "evidence"],
        "properties": {
          "domain": {
            "type": "string",
            "description": "Industry or functional area"
          },
          "years_experience": {
            "type": "number",
            "description": "Years of experience in this domain"
          },
          "depth": {
            "type": "string",
            "enum": ["Expert", "Proficient", "Familiar"],
            "description": "Level of domain expertise"
          },
          "evidence_roles": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Roles demonstrating this expertise"
          },
          "evidence": {
            "type": "object",
            "required": ["file", "lines"],
            "properties": {
              "file": {
                "type": "string"
              },
              "lines": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "leadership_experience": {
      "type": "object",
      "description": "Leadership and management capabilities",
      "properties": {
        "max_team_size": {
          "type": "integer",
          "description": "Largest team size managed"
        },
        "max_budget": {
          "type": ["string", "null"],
          "description": "Largest budget managed (e.g., '$5M') or null"
        },
        "management_years": {
          "type": "number",
          "description": "Years of management experience"
        },
        "leadership_style": {
          "type": "string",
          "description": "Leadership approach from evidence"
        },
        "mentoring": {
          "type": "boolean",
          "description": "Has mentoring experience"
        },
        "hiring_experience": {
          "type": "boolean",
          "description": "Has hiring/recruitment experience"
        },
        "evidence": {
          "type": "object",
          "required": ["file", "lines"],
          "properties": {
            "file": {
              "type": "string"
            },
            "lines": {
              "type": "string"
            }
          }
        }
      }
    },
    "soft_skills": {
      "type": "array",
      "description": "Soft skills with evidence",
      "items": {
        "type": "object",
        "required": ["skill", "evidence_type", "evidence"],
        "properties": {
          "skill": {
            "type": "string",
            "description": "Soft skill name (e.g., Communication, Collaboration)"
          },
          "evidence_type": {
            "type": "string",
            "enum": ["Demonstrated", "Claimed"],
            "description": "Whether skill is demonstrated through actions or claimed"
          },
          "evidence": {
            "type": "object",
            "required": ["file", "lines"],
            "properties": {
              "file": {
                "type": "string"
              },
              "lines": {
                "type": "string"
              },
              "context": {
                "type": "string",
                "description": "How the skill was demonstrated"
              }
            }
          }
        }
      }
    },
    "metadata": {
      "type": "object",
      "description": "Career pattern metadata",
      "required": ["total_roles", "career_progression"],
      "properties": {
        "total_roles": {
          "type": "integer",
          "description": "Total number of roles in career"
        },
        "career_progression": {
          "type": "string",
          "enum": ["Upward", "Lateral", "Mixed"],
          "description": "Overall career trajectory"
        },
        "industry_changes": {
          "type": "integer",
          "description": "Number of industry sector changes"
        },
        "role_changes": {
          "type": "integer",
          "description": "Number of functional role changes"
        },
        "employment_gaps": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["start", "end", "duration_months"],
            "properties": {
              "start": {
                "type": "string",
                "pattern": "^[0-9]{4}-[0-9]{2}$",
                "description": "Gap start date (YYYY-MM)"
              },
              "end": {
                "type": "string",
                "pattern": "^[0-9]{4}-[0-9]{2}$",
                "description": "Gap end date (YYYY-MM)"
              },
              "duration_months": {
                "type": "integer",
                "description": "Gap duration in months"
              },
              "explanation": {
                "type": "string",
                "description": "Explanation if provided in source materials"
              }
            }
          }
        }
      }
    }
  }
}
